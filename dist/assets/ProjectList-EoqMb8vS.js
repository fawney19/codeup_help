import{u as V,k as j,r as D,l as u,o as E,c as o,a as l,b as t,m as v,f as g,t as r,g as L,v as B,F as P,d as $,i as R,j as A,h as f,p as _}from"./index-D8GZJ7dz.js";import{c as U,_ as F,C as G,A as I}from"./clock-Cfynrtri.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=U("git-commit-horizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]),H={class:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50"},J={class:"border-b-4 border-blue-600 bg-brutal-yellow"},Q={class:"max-w-6xl mx-auto px-6 py-8"},W={class:"flex justify-between items-center"},q={class:"flex items-center"},K={class:"max-w-6xl mx-auto px-6 py-8"},X={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Y={class:"bg-brutal-cyan border-4 border-blue-600 shadow-brutal p-6 transform -rotate-1"},Z={class:"text-3xl font-black text-gray-800"},tt={class:"bg-brutal-green border-4 border-blue-600 shadow-brutal p-6"},et={class:"text-3xl font-black text-gray-800"},st={class:"bg-brutal-orange border-4 border-blue-600 shadow-brutal p-6 transform rotate-1"},at={class:"text-3xl font-black text-gray-800"},ot={class:"mb-8"},lt={class:"bg-white border-4 border-blue-600 shadow-brutal-lg p-8"},rt={class:"mb-8"},nt={class:"flex flex-col sm:flex-row gap-4"},it={class:"flex-1"},dt=["disabled"],ct={key:0},bt={key:1},ut={key:0,class:"mb-6"},pt={class:"flex flex-wrap gap-3"},xt=["onClick"],vt={key:0,class:"text-center py-12"},gt={key:1,class:"text-center py-12"},ht={class:"bg-brutal-orange border-4 border-blue-600 shadow-brutal-lg p-8 max-w-md mx-auto transform -rotate-1"},yt={class:"text-lg font-bold text-gray-800"},ft={key:2,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},_t=["onClick"],mt={class:"p-6"},wt={class:"flex justify-between items-start mb-4"},kt={class:"text-xl font-black text-gray-800 uppercase mb-2 flex-1"},Ct={class:"flex flex-col items-end space-y-2 ml-4"},Dt={class:"bg-white border-2 border-blue-600 px-2 py-1 text-xs font-bold"},Pt={class:"text-gray-800 font-bold mb-4 text-sm"},$t={class:"flex flex-wrap gap-2 text-xs font-bold text-gray-800"},At={class:"bg-blue-600 text-white px-2 py-1 border-2 border-blue-600 flex items-center"},Mt={class:"bg-blue-600 text-white px-2 py-1 border-2 border-blue-600 flex items-center"},Tt={key:0,class:"bg-blue-600 text-white px-2 py-1 border-2 border-blue-600 flex items-center"},Nt={key:3,class:"mt-8 flex justify-center"},zt={class:"flex items-center gap-4"},St=["disabled"],Vt={class:"bg-white border-4 border-blue-600 px-6 py-3 font-black text-gray-800"},jt=["disabled"],Rt={__name:"ProjectList",setup(Et){const m=R();V();const n=j(),p=D(""),h=D(null),M=u(()=>n.projects),c=u(()=>n.projects),w=u(()=>n.stats),y=u(()=>n.loading),i=u(()=>n.pagination),T=u(()=>{const a=new Date;return a.setDate(a.getDate()-7),!c.value||!Array.isArray(c.value)?0:c.value.filter(e=>new Date(e.last_activity_at)>a).length}),N=()=>{h.value&&clearTimeout(h.value),h.value=setTimeout(()=>{n.pagination.page=1,x(!0)},500)},z=a=>{if(!a)return"暂无活动";const e=new Date(a),b=Math.abs(new Date-e),d=Math.ceil(b/(1e3*60*60*24));return d===1?"1天前":d<7?`${d}天前`:d<30?`${Math.floor(d/7)}周前`:d<365?`${Math.floor(d/30)}月前`:`${Math.floor(d/365)}年前`},x=async(a=!1)=>{await n.fetchStats({search:p.value},a),await n.fetchProjects({search:p.value,page:i.value?.page||1,per_page:i.value?.per_page||20},a)},S=()=>{n.clearData(),x(!0)},k=async a=>{n.pagination.page=a,await x()},C=a=>{const e=M.value.find(s=>s.id===a);if(e){n.setCurrentProject({overview:e});const s=encodeURIComponent(e.name||e.path||"project");m.push(`/projects/${a}/${s}`)}else m.push(`/projects/${a}`)};return E(()=>{x()}),(a,e)=>(l(),o("div",H,[t("header",J,[t("div",Q,[t("div",W,[e[3]||(e[3]=t("div",null,[t("h1",{class:"text-6xl font-black text-gray-800 uppercase tracking-tight"}," CODEUP "),t("div",{class:"text-xl font-bold text-gray-800 mt-2"}," PROJECT MANAGER ")],-1)),t("div",q,[v(F)])])])]),t("main",K,[e[11]||(e[11]=t("div",{class:"text-center py-8 mb-8"},[t("div",{class:"bg-brutal-pink border-4 border-blue-600 shadow-brutal p-8 mb-6 transform rotate-1"},[t("h2",{class:"text-4xl font-black text-gray-800 uppercase mb-4"}," 管理您的代码项目 "),t("p",{class:"text-xl font-bold text-gray-800"}," 强大的项目管理工具 / 简单粗暴的界面设计 ")])],-1)),t("div",X,[t("div",Y,[t("div",Z,r(w.value.total),1),e[4]||(e[4]=t("div",{class:"text-lg font-bold text-gray-800 uppercase"},"总项目数",-1))]),t("div",tt,[t("div",et,r(w.value.authorized),1),e[5]||(e[5]=t("div",{class:"text-lg font-bold text-gray-800 uppercase"},"可访问项目",-1))]),t("div",st,[t("div",at,r(T.value),1),e[6]||(e[6]=t("div",{class:"text-lg font-bold text-gray-800 uppercase"},"活跃项目",-1))])]),t("div",ot,[t("div",lt,[t("div",rt,[e[7]||(e[7]=t("h3",{class:"text-2xl font-black text-gray-800 uppercase mb-4"},"搜索项目",-1)),t("div",nt,[t("div",it,[L(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>p.value=s),onInput:N,placeholder:"输入项目名称...",class:"w-full h-14 px-4 border-4 border-blue-600 font-bold text-lg focus:outline-none focus:bg-brutal-yellow transition-colors"},null,544),[[B,p.value]])]),t("button",{onClick:S,disabled:y.value,class:"bg-brutal-green border-4 border-blue-600 shadow-brutal px-8 py-3 font-black text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all disabled:opacity-50"},[y.value?(l(),o("span",ct,"刷新中...")):(l(),o("span",bt,"刷新"))],8,dt)])]),c.value.length>0?(l(),o("div",ut,[e[8]||(e[8]=t("h3",{class:"text-xl font-black text-gray-800 uppercase mb-4"},"快速访问:",-1)),t("div",pt,[(l(!0),o(P,null,$(c.value.slice(0,6),s=>(l(),o("button",{key:s.id,onClick:b=>C(s.id),class:"bg-brutal-pink border-4 border-blue-600 px-4 py-2 font-bold text-gray-800 hover:bg-brutal-cyan hover:transform hover:scale-105 transition-all"},r(s.name||s.path),9,xt))),128))])])):g("",!0)])]),y.value?(l(),o("div",vt,[...e[9]||(e[9]=[t("div",{class:"bg-brutal-yellow border-4 border-blue-600 shadow-brutal p-8 inline-block"},[t("div",{class:"text-2xl font-black text-gray-800 uppercase"},"加载中..."),t("div",{class:"mt-2 text-lg font-bold text-gray-800"},"正在获取项目列表")],-1)])])):c.value.length===0?(l(),o("div",gt,[t("div",ht,[e[10]||(e[10]=t("h3",{class:"text-2xl font-black text-gray-800 uppercase mb-4"},"没有找到项目",-1)),t("p",yt,r(p.value?"尝试调整搜索关键词":"您暂时没有可访问的项目"),1)])])):(l(),o("div",ft,[(l(!0),o(P,null,$(c.value,(s,b)=>(l(),o("div",{key:s.id,class:A(["border-4 border-blue-600 shadow-brutal hover:shadow-brutal-lg transition-all duration-200 cursor-pointer group hover:transform hover:-translate-y-1",[b%4===0?"bg-brutal-cyan":b%4===1?"bg-brutal-yellow":b%4===2?"bg-brutal-pink":"bg-brutal-green"]]),onClick:d=>C(s.id)},[t("div",mt,[t("div",wt,[t("h3",kt,r(s.name||s.path),1),t("div",Ct,[s.visibility?(l(),o("span",{key:0,class:A(["bg-blue-600 text-white px-2 py-1 font-bold text-xs uppercase border-2 border-blue-600",s.visibility==="public"?"text-brutal-green":"text-brutal-yellow"])},r(s.visibility==="public"?"公开":"私有"),3)):g("",!0),t("span",Dt,"ID: "+r(s.id),1)])]),t("p",Pt,r(s.description||"暂无项目描述"),1),t("div",$t,[t("div",At,[v(_(G),{class:"w-3 h-3 mr-1"}),f(" "+r(z(s.last_activity_at)),1)]),t("div",Mt,[v(_(O),{class:"w-3 h-3 mr-1"}),f(" "+r(s.default_branch||"master"),1)]),s.star_count?(l(),o("div",Tt,[v(_(I),{class:"w-3 h-3 mr-1"}),f(" "+r(s.star_count),1)])):g("",!0)])])],10,_t))),128))])),i.value&&i.value.total_pages>1?(l(),o("div",Nt,[t("div",zt,[t("button",{disabled:i.value.page<=1,onClick:e[1]||(e[1]=s=>k(i.value.page-1)),class:"bg-brutal-cyan border-4 border-blue-600 shadow-brutal px-6 py-3 font-black text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"}," ← 上一页 ",8,St),t("div",Vt,r(i.value.page)+" / "+r(i.value.total_pages),1),t("button",{disabled:i.value.page>=i.value.total_pages,onClick:e[2]||(e[2]=s=>k(i.value.page+1)),class:"bg-brutal-pink border-4 border-blue-600 shadow-brutal px-6 py-3 font-black text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"}," 下一页 → ",8,jt)])])):g("",!0)])]))}};export{Rt as default};
