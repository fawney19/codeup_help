import{k as Fe,u as Le,r as v,l as A,o as Ne,q as Ve,s as Be,c as l,a as r,b as t,f as p,x as Ee,t as u,m as o,h as d,p as n,F as H,d as q,g as oe,v as le,w as Pe,y as Ue,T as He,z as qe,i as Ge,A as Ye,B as We,j as Ze,n as Xe}from"./index-D8GZJ7dz.js";import{c as m,_ as Je,C as N,A as ne}from"./clock-Cfynrtri.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=m("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=m("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=m("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=m("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=m("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=m("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=m("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=m("folder-minus",[["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=m("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=m("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=m("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=m("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=m("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=m("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),nt=(Y,f)=>{const W=Y.__vccOpts||Y;for(const[$,Z]of f)W[$]=Z;return W},ct={class:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50"},it={class:"border-b-4 border-black bg-brutal-cyan"},dt={class:"max-w-7xl mx-auto px-6 py-8"},ut={class:"flex justify-between items-center"},bt={class:"bg-blue-600 text-white px-3 py-1 inline-block mt-2 font-bold text-sm"},pt={class:"flex items-center"},ht={class:"max-w-7xl mx-auto py-6 px-6"},vt={class:"bg-brutal-yellow border-4 border-blue-600 shadow-brutal p-6 mb-8"},mt={class:"text-2xl font-black text-gray-800 uppercase mb-4 flex items-center"},xt={class:"flex flex-wrap gap-4"},yt=["onClick"],ft={class:"mt-6 flex flex-wrap gap-4"},gt={class:"block text-lg font-black text-gray-800 uppercase mb-2 flex items-center"},wt={class:"block text-lg font-black text-gray-800 uppercase mb-2 flex items-center"},kt={class:"flex items-end"},_t={key:0,class:"bg-brutal-pink border-4 border-blue-600 shadow-brutal p-6 mb-8"},Dt={class:"flex justify-between items-start mb-6"},Ct={class:"text-2xl font-black text-gray-800 uppercase flex items-center"},jt=["disabled"],Mt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},$t={class:"bg-brutal-cyan border-4 border-blue-600 text-center p-4"},St={class:"text-3xl font-black text-gray-800"},Tt={class:"bg-brutal-green border-4 border-blue-600 text-center p-4"},It={class:"text-3xl font-black text-gray-800"},At={class:"bg-brutal-yellow border-4 border-blue-600 text-center p-4"},zt={class:"text-3xl font-black text-gray-800"},Ot={class:"bg-brutal-orange border-4 border-blue-600 text-center p-4"},Rt={class:"text-3xl font-black text-gray-800"},Ft={class:"bg-white border-4 border-blue-600 shadow-brutal-lg p-6"},Lt={class:"flex justify-between items-center mb-6"},Nt={class:"text-2xl font-black text-gray-800 uppercase flex items-center"},Vt={key:0,class:"flex items-center space-x-4"},Bt={key:0,class:"text-center py-12"},Et={class:"bg-brutal-yellow border-4 border-blue-600 shadow-brutal p-6 inline-block"},Pt={class:"text-xl font-black text-gray-800 uppercase mb-2 flex items-center justify-center"},Ut={key:1,class:"text-center py-12"},Ht={key:2,class:"space-y-6"},qt=["onClick"],Gt={class:"flex items-center"},Yt={class:"w-6 h-6 bg-blue-600 text-white flex items-center justify-center font-black mr-3"},Wt={class:"bg-brutal-pink border-2 border-blue-600 px-4 py-2 font-black text-gray-800 text-sm uppercase"},Zt={class:"ml-4 bg-blue-600 text-white px-2 py-1 font-bold text-xs uppercase"},Xt={key:0,class:"pl-4 border-l-4 border-black space-y-4 transition-all duration-200"},Jt={class:"absolute -left-8 w-8 h-8 bg-brutal-green border-2 border-blue-600 flex items-center justify-center font-black text-gray-800 text-xs"},Kt={class:"flex justify-between items-start"},Qt={class:"flex-1"},es={class:"flex items-center space-x-2"},ts={class:"text-sm font-medium text-gray-900"},ss={class:"text-sm text-gray-500"},as={key:0,class:"mt-1 text-sm text-gray-600"},rs={key:1,class:"mt-2 space-y-1"},os={class:"font-bold mb-1"},ls={class:"whitespace-pre-wrap"},ns={key:0,class:"text-xs text-gray-400"},cs={class:"ml-4 text-right flex-shrink-0"},is={class:"text-xs text-gray-500"},ds={key:0,class:"text-xs text-gray-400 mt-1"},us={class:"bg-brutal-yellow border-b-4 border-blue-600 p-6 flex items-center justify-between"},bs={class:"text-2xl font-black text-gray-800 uppercase flex items-center"},ps={class:"flex items-center space-x-3"},hs=["disabled"],vs={class:"flex-1 overflow-auto p-6 bg-white"},ms={key:0,class:"flex flex-col items-center space-y-6"},xs={class:"bg-brutal-pink border-4 border-blue-600 shadow-brutal px-6 py-3 transform -rotate-1"},ys={class:"text-sm text-gray-800 font-black uppercase flex items-center justify-center"},fs={class:"bg-brutal-cyan border-4 border-blue-600 shadow-brutal px-6 py-3 transform rotate-1"},gs={class:"text-sm text-gray-800 font-black uppercase flex items-center justify-center"},ws={class:"w-full max-w-2xl"},ks={class:"bg-brutal-green border-4 border-blue-600 shadow-brutal p-6"},_s={class:"text-lg font-black text-gray-800 uppercase mb-4 flex items-center"},Ds={class:"bg-brutal-yellow border-4 border-blue-600 shadow-brutal p-8 inline-block transform rotate-1 hover:-rotate-1 transition-transform duration-300"},Cs={class:"text-2xl font-black text-gray-800 uppercase mb-4 flex items-center justify-center"},js={class:"text-xs text-gray-600 font-bold flex items-center justify-center"},Ms={key:1,class:"text-center py-12"},$s={class:"bg-brutal-cyan border-4 border-blue-600 shadow-brutal p-8 inline-block transform -rotate-1"},Ss={class:"mt-4 text-gray-800 font-black uppercase flex items-center justify-center"},Ts={key:0,class:"mt-2 text-sm text-gray-600 font-bold flex items-center justify-center"},Is={key:2,class:"space-y-6"},As={class:"bg-brutal-pink border-4 border-blue-600 shadow-brutal p-4 flex items-center justify-between transform rotate-1"},zs={class:"text-xl font-black text-gray-800 uppercase flex items-center"},Os={class:"flex items-center space-x-4 mt-2 text-sm font-bold text-gray-600"},Rs={key:0,class:"bg-blue-600 text-white px-2 py-1 rounded flex items-center"},Fs={key:1,class:"bg-blue-600 text-white px-2 py-1 rounded flex items-center"},Ls={class:"flex space-x-2"},Ns={key:0,class:"flex flex-col items-center justify-center py-12"},Vs={class:"text-gray-800 font-bold text-sm mt-4 flex items-center justify-center"},Bs={key:0,class:"text-gray-600 font-bold text-xs mt-2 flex items-center justify-center"},Es={key:1,class:"whitespace-pre-wrap font-mono text-sm text-gray-800 leading-relaxed"},Ps={class:"fixed top-4 right-4 z-[99999] space-y-2"},Us={class:"flex items-center px-4 py-3"},Hs={class:"flex-shrink-0"},qs={class:"ml-3 flex-1"},Gs={class:"text-sm font-black text-gray-800 uppercase"},Ys={class:"ml-2"},Ws=["onClick"],Zs={__name:"ProjectDetail",props:{id:{type:[String,Number],required:!0},name:{type:String,required:!1}},setup(Y){const f=Y;We();const W=Ge(),$=Fe(),Z=Le(),V=v("week"),g=v(""),w=v(""),ee=v(""),h=v(""),_=v(!1),B=v(null),S=v(null),D=v(null),te=v(!1),T=v(new Set),E=v(""),me=v(null),X=v([]);let xe=0;const ye=[{value:"today",label:"ä»Šå¤©",icon:N},{value:"week",label:"æœ¬å‘¨",icon:K},{value:"month",label:"æœ¬æœˆ",icon:ve},{value:"year",label:"ä»Šå¹´",icon:ve}],se=A(()=>$.currentProject),C=A(()=>$.activities),fe=A(()=>$.loading),ie=A(()=>f.name?decodeURIComponent(f.name):se.value?.overview?.name||"åŠ è½½ä¸­..."),J=v(new Date),z=A(()=>{if(!B.value)return null;if(_.value){const a=((J.value-B.value)/1e3).toFixed(1);return`${parseFloat(a)}ç§’`}else if(S.value){const e=((S.value-B.value)/1e3).toFixed(1);return`${parseFloat(e)}ç§’`}return null}),O=A(()=>{const s={};return C.value.forEach(e=>{const a=new Date(e.created_at).toDateString();s[a]||(s[a]=[]),s[a].push(e)}),Object.keys(s).forEach(e=>{s[e].sort((a,i)=>new Date(i.created_at)-new Date(a.created_at))}),s}),R=A(()=>{if(!C.value.length)return null;const s=C.value.filter(c=>c.action?.includes("push")).length,e=C.value.reduce((c,x)=>c+(x.commits?.length||0),0),a=Object.keys(O.value).length,i=C.value.reduce((c,x)=>c+(x.commits?.reduce((b,j)=>b+(j.added||0)+(j.modified||0)+(j.removed||0),0)||0),0);return{pushCount:s,commitCount:e,fileChanges:i,activeDays:a}}),ge=s=>{const e=new Date(s),a=new Date,i=new Date(a);return i.setDate(i.getDate()-1),e.toDateString()===a.toDateString()?"ä»Šå¤©":e.toDateString()===i.toDateString()?"æ˜¨å¤©":e.toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"})},de=s=>new Date(s).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),ae=s=>{const e=new Date,a=i=>{const c=i.getFullYear(),x=String(i.getMonth()+1).padStart(2,"0"),b=String(i.getDate()).padStart(2,"0");return`${c}-${x}-${b}`};switch(s){case"today":g.value=a(e),w.value=a(e);break;case"week":const i=new Date(e),c=e.getDay(),x=c===0?6:c-1;i.setDate(e.getDate()-x),g.value=a(i),w.value=a(e);break;case"month":const b=new Date(e.getFullYear(),e.getMonth(),1);g.value=a(b),w.value=a(e);break;case"year":const j=new Date(e.getFullYear(),0,1);g.value=a(j),w.value=a(e);break}},we=s=>{V.value=s,ae(s),F()},F=async()=>{const s=f.id;if(!g.value||!w.value){console.warn("å¼€å§‹æ—¥æœŸæˆ–ç»“æŸæ—¥æœŸä¸ºç©ºï¼Œè·³è¿‡åŠ è½½");return}try{const e=await $.fetchActivities(s,{start_date:g.value,end_date:w.value});ee.value="",h.value=""}catch(e){console.error("Failed to load activities:",e)}},ke=()=>{if(!C.value.length)return;const{pushCount:s,commitCount:e,fileChanges:a,activeDays:i}=R.value,c=be(),x=Z.user?.name||Z.user?.email?.split("@")[0]||"å¼€å‘è€…";let b=`${c}æ´»åŠ¨å°ç»“ï¼ˆå¼€å‘è€…ï¼š${x}ï¼‰ï¼š

`;b+=`ç»Ÿè®¡æ¦‚è§ˆï¼š
`,b+=`â€¢ æŽ¨é€æ¬¡æ•°ï¼š${s} æ¬¡
`,b+=`â€¢ æäº¤æ•°é‡ï¼š${e} ä¸ª
`,b+=`â€¢ æ–‡ä»¶å˜æ›´ï¼š${a} å¤„
`,b+=`â€¢ æ´»è·ƒå¤©æ•°ï¼š${i} å¤©

`;const j={};Object.entries(O.value).forEach(([M,y])=>{const P=y.filter(U=>U.action?.includes("Push")).length,k=y.reduce((U,re)=>U+(re.commits?.length||0),0);j[M]={pushes:P,commits:k,activities:y}}),b+=`æ¯æ—¥ç»Ÿè®¡ï¼š
`,Object.entries(j).sort(([M],[y])=>new Date(y)-new Date(M)).forEach(([M,y])=>{const P=new Date(M).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"});b+=`â€¢ ${P}ï¼šæŽ¨é€ ${y.pushes} æ¬¡ï¼Œæäº¤ ${y.commits} ä¸ª
`}),b+=`
`,b+=`è¯¦ç»†æäº¤è®°å½•ï¼š
`,Object.entries(j).sort(([M],[y])=>new Date(y)-new Date(M)).forEach(([M,y])=>{const P=new Date(M).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"});b+=`
=== ${P} ===
`,y.activities.forEach((k,U)=>{const re=de(k.created_at);b+=`
${U+1}. [${re}] ${k.action||"Push"} to ${k.target_title||k.ref_name||"master"}
`,k.note&&(b+=`   å¤‡æ³¨: ${k.note}
`),k.commits&&k.commits.length>0&&(b+=`   æäº¤å†…å®¹:
`,k.commits.forEach((I,Re)=>{b+=`   ${Re+1}) ${I.id?.substring(0,7)} - ${I.message||"æ— æäº¤ä¿¡æ¯"}
`,I.author&&typeof I.author=="string"?b+=`      ä½œè€…: ${I.author}
`:I.author&&I.author.name&&(b+=`      ä½œè€…: ${I.author.name}
`)}))})}),ee.value=b},_e=()=>{te.value=!0,J.value=new Date},ue=()=>{te.value=!1},De=s=>s?s.replace(/#{1,6}\s+/g,"").replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/`(.*?)`/g,"$1").replace(/\[([^\]]*)\]\([^)]*\)/g,"$1").replace(/^\s*[-*+]\s+/gm,"â€¢ ").replace(/\n\s*\n/g,`

`).trim():"",be=()=>{if(g.value&&w.value)switch(V.value){case"today":return"ä»Šæ—¥";case"week":return"æœ¬å‘¨";case"month":return"æœ¬æœˆ";case"year":return"ä»Šå¹´";default:return`${g.value} è‡³ ${w.value}`}return"æ—¶é—´èŒƒå›´æœªè®¾ç½®"},Ce=()=>{_.value||(h.value="",B.value=null,S.value=null,J.value=new Date,D.value&&(clearInterval(D.value),D.value=null),je())},je=async()=>{if(C.value.length&&!_.value)try{_.value=!0,h.value="",B.value=new Date,S.value=null,D.value=setInterval(()=>{J.value=new Date},100),ke();let s=`é¡¹ç›®ï¼š${ie.value}
æ—¶é—´èŒƒå›´ï¼š${be()}
æ´»åŠ¨æ€»ç»“ï¼š${ee.value}`;E.value&&E.value.trim()&&(s+=`

ç”¨æˆ·è¡¥å……ä¿¡æ¯ï¼š
${E.value.trim()}`);const e={project_id:parseInt(f.id),report_type:"activity_summary",time_range:"custom",start_date:g.value,end_date:w.value,additional_context:s,response_mode:"blocking",user:"frontend_user"},a=await Ye.generateAIReportBlocking(f.id,e);a&&a.data&&a.data.answer&&(h.value=a.data.answer,S.value=new Date,D.value&&(clearInterval(D.value),D.value=null))}catch(s){console.error("AIæŠ¥å‘Šç”Ÿæˆå¤±è´¥:",s),h.value=`## æŠ¥å‘Šç”Ÿæˆå¤±è´¥

å¾ˆæŠ±æ­‰ï¼ŒAIæŠ¥å‘Šç”Ÿæˆè¿‡ç¨‹ä¸­å‡ºçŽ°äº†é”™è¯¯ï¼š${s.message}

è¯·ç¨åŽé‡è¯•ï¼Œæˆ–è”ç³»ç³»ç»Ÿç®¡ç†å‘˜ã€‚

---
*é”™è¯¯æ—¶é—´ï¼š${new Date().toLocaleString("zh-CN")}*`,S.value=new Date}finally{_.value=!1,D.value&&(clearInterval(D.value),D.value=null)}},Me=(s,e="success")=>{const a={id:++xe,message:s,type:e,timestamp:Date.now()};X.value.push(a),console.log("Toastæ·»åŠ :",s),setTimeout(()=>{pe(a.id)},4e3)},pe=s=>{const e=X.value.findIndex(a=>a.id===s);e>-1&&(X.value.splice(e,1),console.log("Toastç§»é™¤:",s))},L=s=>{Me(s,"success")},$e=async()=>{try{if(!h.value){L("æš‚æ— æŠ¥å‘Šå†…å®¹å¯å¤åˆ¶");return}await navigator.clipboard.writeText(h.value),L("æŠ¥å‘Šå·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(s){console.error("å¤åˆ¶å¤±è´¥:",s),L("å¤åˆ¶å¤±è´¥ï¼Œè¯·é‡è¯•")}},Se=async()=>{try{if(!h.value){L("æš‚æ— æŠ¥å‘Šå†…å®¹å¯å¤åˆ¶");return}const s=De(h.value);await navigator.clipboard.writeText(s),L("æ–‡æœ¬å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(s){console.error("å¤åˆ¶å¤±è´¥:",s),L("å¤åˆ¶å¤±è´¥ï¼Œè¯·é‡è¯•")}},Te=()=>{const s=new Blob([h.value],{type:"text/markdown;charset=utf-8"}),e=URL.createObjectURL(s),a=document.createElement("a");a.href=e,a.download=`é¡¹ç›®æ´»åŠ¨æŠ¥å‘Š_${f.id}_${new Date().toISOString().split("T")[0]}.md`,a.click(),URL.revokeObjectURL(e)},Ie=s=>{T.value.has(s)?T.value.delete(s):T.value.add(s)},he=s=>T.value.has(s),Ae=()=>{T.value=new Set(Object.keys(O.value))},ze=()=>{T.value.clear()},Oe=()=>{W.push("/")};return Ne(()=>{f.id&&(ae(V.value),se.value?.overview||$.fetchProjectOverview(f.id),F())}),Ve(()=>{}),Be(()=>f.id,s=>{s&&(ae(V.value),$.fetchProjectOverview(s),F())}),(s,e)=>(r(),l("div",ct,[t("header",it,[t("div",dt,[t("div",ut,[t("div",null,[t("h1",{class:"text-4xl font-black text-gray-800 uppercase cursor-pointer hover:bg-brutal-yellow hover:px-2 transition-all",onClick:Oe},u(ie.value),1),t("div",bt,u(se.value?.overview?.description||"é¡¹ç›®æ´»åŠ¨æ—¶é—´çº¿"),1)]),t("div",pt,[o(Je)])])])]),t("main",ht,[t("div",vt,[t("h2",mt,[o(n(N),{class:"w-6 h-6 mr-3 text-blue-600"}),e[4]||(e[4]=d(" æ—¶é—´ç­›é€‰å™¨ ",-1))]),t("div",xt,[(r(),l(H,null,q(ye,a=>t("button",{key:a.value,onClick:i=>we(a.value),class:Ze(["border-4 border-blue-600 px-4 py-2 font-black text-gray-800 uppercase transition-all hover:transform hover:scale-105",V.value===a.value?"bg-blue-600 text-brutal-yellow shadow-brutal-sm":"bg-white hover:bg-brutal-pink"])},u(a.label),11,yt)),64))]),t("div",ft,[t("div",null,[t("label",gt,[o(n(K),{class:"w-5 h-5 mr-2 text-blue-600"}),e[5]||(e[5]=d(" å¼€å§‹æ—¥æœŸ ",-1))]),oe(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=a=>g.value=a),onChange:F,class:"border-4 border-blue-600 px-3 py-2 font-bold focus:outline-none focus:bg-brutal-cyan"},null,544),[[le,g.value]])]),t("div",null,[t("label",wt,[o(n(K),{class:"w-5 h-5 mr-2 text-blue-600"}),e[6]||(e[6]=d(" ç»“æŸæ—¥æœŸ ",-1))]),oe(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>w.value=a),onChange:F,class:"border-4 border-blue-600 px-3 py-2 font-bold focus:outline-none focus:bg-brutal-cyan"},null,544),[[le,w.value]])]),t("div",kt,[t("button",{onClick:F,class:"bg-brutal-green border-4 border-blue-600 shadow-brutal px-6 py-2 font-black text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all"},[o(n(ot),{class:"w-5 h-5 mr-2"}),e[7]||(e[7]=d(" æŸ¥è¯¢ ",-1))])])])]),R.value?(r(),l("div",_t,[t("div",Dt,[t("h2",Ct,[o(n(Ke),{class:"w-6 h-6 mr-3 text-blue-600"}),e[8]||(e[8]=d(" æ´»åŠ¨æ¦‚è§ˆ ",-1))]),t("button",{onClick:_e,disabled:!C.value.length,class:"bg-brutal-orange border-4 border-blue-600 shadow-brutal px-4 py-2 font-black text-gray-800 uppercase hover:transform hover:scale-105 transition-all disabled:opacity-50"},[o(n(G),{class:"w-5 h-5 mr-2"}),e[9]||(e[9]=d(" ç”ŸæˆAIæŠ¥å‘Š ",-1))],8,jt)]),t("div",Mt,[t("div",$t,[t("div",St,u(R.value.pushCount),1),e[10]||(e[10]=t("div",{class:"text-sm font-bold text-gray-800 uppercase"},"æŽ¨é€æ¬¡æ•°",-1))]),t("div",Tt,[t("div",It,u(R.value.commitCount),1),e[11]||(e[11]=t("div",{class:"text-sm font-bold text-gray-800 uppercase"},"æäº¤æ•°é‡",-1))]),t("div",At,[t("div",zt,u(R.value.fileChanges),1),e[12]||(e[12]=t("div",{class:"text-sm font-bold text-gray-800 uppercase"},"æ–‡ä»¶å˜æ›´",-1))]),t("div",Ot,[t("div",Rt,u(R.value.activeDays),1),e[13]||(e[13]=t("div",{class:"text-sm font-bold text-gray-800 uppercase"},"æ´»è·ƒå¤©æ•°",-1))])])])):p("",!0),t("div",Ft,[t("div",Lt,[t("h2",Nt,[o(n(lt),{class:"w-6 h-6 mr-3 text-blue-600"}),e[14]||(e[14]=d(" æ´»åŠ¨æ—¶é—´çº¿ ",-1))]),Object.keys(O.value).length>0?(r(),l("div",Vt,[T.value.size<Object.keys(O.value).length?(r(),l("button",{key:0,onClick:Ae,class:"bg-brutal-cyan border-4 border-blue-600 px-3 py-1 font-black text-gray-800 text-sm uppercase hover:bg-brutal-pink transition-colors"},[o(n(st),{class:"w-4 h-4 mr-2"}),e[15]||(e[15]=d(" å…¨éƒ¨æ”¶ç¼© ",-1))])):p("",!0),T.value.size>0?(r(),l("button",{key:1,onClick:ze,class:"bg-brutal-green border-4 border-blue-600 px-3 py-1 font-black text-gray-800 text-sm uppercase hover:bg-brutal-yellow transition-colors"},[o(n(at),{class:"w-4 h-4 mr-2"}),e[16]||(e[16]=d(" å…¨éƒ¨å±•å¼€ ",-1))])):p("",!0)])):p("",!0)]),fe.value?(r(),l("div",Bt,[t("div",Et,[t("div",Pt,[o(n(rt),{class:"w-6 h-6 mr-3 animate-spin text-blue-600"}),e[17]||(e[17]=d(" åŠ è½½ä¸­ ",-1))]),e[18]||(e[18]=t("div",{class:"text-sm font-bold text-gray-800"},"æ­£åœ¨èŽ·å–æ´»åŠ¨è®°å½•...",-1))])])):C.value.length===0?(r(),l("div",Ut,[...e[19]||(e[19]=[t("div",{class:"bg-brutal-orange border-4 border-blue-600 shadow-brutal-lg p-8 max-w-md mx-auto transform -rotate-1"},[t("h3",{class:"text-xl font-black text-gray-800 uppercase mb-4"},"ðŸ“­ æ²¡æœ‰æ´»åŠ¨è®°å½•"),t("p",{class:"text-sm font-bold text-gray-800"}," åœ¨æ‰€é€‰æ—¶é—´èŒƒå›´å†…æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æŽ¨é€æ´»åŠ¨ ")],-1)])])):(r(),l("div",Ht,[(r(!0),l(H,null,q(O.value,(a,i)=>(r(),l("div",{key:i,class:"relative"},[t("div",{class:"flex items-center mb-4 cursor-pointer hover:bg-brutal-yellow hover:px-2 p-2 -mx-2 transition-all border-2 border-blue-600",onClick:c=>Ie(i)},[t("div",Gt,[t("span",Yt,u(he(i)?"â–º":"â–¼"),1),t("div",Wt,u(ge(i)),1)]),e[20]||(e[20]=t("div",{class:"flex-1 h-1 bg-blue-600 ml-4"},null,-1)),t("div",Zt,u(a.length)+" ä¸ªæ´»åŠ¨ ",1)],8,qt),he(i)?p("",!0):(r(),l("div",Xt,[(r(!0),l(H,null,q(a,c=>(r(),l("div",{key:c.id||c.created_at,class:"relative border-4 border-blue-600 shadow-brutal bg-white p-4 hover:shadow-brutal-lg hover:transform hover:-translate-y-1 transition-all"},[t("div",Jt,[o(n(Q),{class:"w-4 h-4"})]),t("div",Kt,[t("div",Qt,[t("div",es,[t("h3",ts,u(c.action||"pushed to"),1),t("span",ss,u(c.target_title||c.ref_name||"master"),1)]),c.note?(r(),l("p",as,u(c.note),1)):p("",!0),c.commits&&c.commits.length?(r(),l("div",rs,[(r(!0),l(H,null,q(c.commits.slice(0,3),x=>(r(),l("div",{key:x.id,class:"text-xs text-gray-500 font-mono bg-gray-50 p-2 rounded"},[t("div",os,u(x.id?.substring(0,7)),1),t("div",ls,u(x.message),1)]))),128)),c.commits.length>3?(r(),l("div",ns," è¿˜æœ‰ "+u(c.commits.length-3)+" ä¸ªæäº¤... ",1)):p("",!0)])):p("",!0)]),t("div",cs,[t("div",is,u(de(c.created_at)),1),c.author_name?(r(),l("div",ds,u(c.author_name),1)):p("",!0)])])]))),128))]))]))),128))]))])]),te.value?(r(),l("div",{key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:ue},[t("div",{class:"bg-white border-4 border-blue-600 shadow-brutal-lg max-w-4xl w-full max-h-[90vh] flex flex-col transform rotate-1 hover:rotate-0 transition-transform duration-300",onClick:e[3]||(e[3]=Pe(()=>{},["stop"]))},[t("div",us,[t("h2",bs,[o(n(G),{class:"w-6 h-6 mr-3 text-blue-600"}),e[21]||(e[21]=d(" AIæ™ºèƒ½æŠ¥å‘Š ",-1))]),t("div",ps,[t("button",{onClick:Ce,disabled:_.value,class:"bg-brutal-green border-4 border-blue-600 shadow-brutal px-4 py-2 font-black text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all disabled:opacity-50 disabled:cursor-not-allowed","data-ai-generate-btn":""},[o(n(G),{class:"w-4 h-4 mr-2 inline"}),d(" "+u(_.value?"ç”Ÿæˆä¸­...":h.value?"é‡æ–°ç”Ÿæˆ":"ç”ŸæˆæŠ¥å‘Š"),1)],8,hs),t("button",{onClick:ue,class:"bg-brutal-red border-4 border-blue-600 shadow-brutal px-3 py-2 font-black text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all"},[o(n(ce),{class:"w-4 h-4"})])])]),t("div",vs,[!_.value&&!h.value?(r(),l("div",ms,[t("div",xs,[t("div",ys,[o(n(N),{class:"w-4 h-4 mr-2 text-blue-600"}),e[22]||(e[22]=d(" é¢„è®¡è€—æ—¶ 30-60 ç§’ ",-1))])]),t("div",fs,[t("div",gs,[o(n(ce),{class:"w-4 h-4 mr-2 text-blue-600"}),e[23]||(e[23]=d(" å¼€å§‹ç”ŸæˆåŽå¯å…³é—­çª—å£ï¼Œç”Ÿæˆä¸ä¼šä¸­æ–­ ",-1))])]),t("div",ws,[t("div",ks,[t("h3",_s,[o(n(Q),{class:"w-5 h-5 mr-2 text-blue-600"}),e[24]||(e[24]=d(" ä¿¡æ¯è¡¥å…… (å¯é€‰) ",-1))]),oe(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=a=>E.value=a),placeholder:"æ‚¨å¯ä»¥åœ¨è¿™é‡Œè¡¥å……é¡¹ç›®èƒŒæ™¯ä¿¡æ¯ã€å·¥ä½œå†…å®¹è¯´æ˜Žæˆ–å…¶ä»–éœ€è¦AIäº†è§£çš„ä¿¡æ¯ï¼Œä»¥ä¾¿ç”Ÿæˆæ›´ç²¾å‡†çš„æŠ¥å‘Š...",class:"w-full h-32 p-4 border-4 border-blue-600 font-bold text-gray-800 text-sm resize-none focus:outline-none focus:bg-brutal-cyan placeholder:text-gray-500 placeholder:font-normal"},null,512),[[le,E.value]]),e[25]||(e[25]=t("div",{class:"mt-2 text-xs text-gray-600 font-bold"}," æç¤ºï¼šæ·»åŠ ç›¸å…³èƒŒæ™¯ä¿¡æ¯å¯ä»¥è®©AIç”Ÿæˆæ›´å…·ä½“ã€æ›´æœ‰ä»·å€¼çš„åˆ†æžæŠ¥å‘Š ",-1))])]),t("div",Ds,[o(n(G),{class:"w-16 h-16 text-blue-600 mb-4 mx-auto"}),t("h3",Cs,[o(n(G),{class:"w-8 h-8 mr-3"}),e[26]||(e[26]=d(" AIæ™ºèƒ½æŠ¥å‘Š ",-1))]),e[28]||(e[28]=t("p",{class:"text-sm font-bold text-gray-800 mb-4"},"ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ç”Ÿæˆæ™ºèƒ½åˆ†æžæŠ¥å‘Š",-1)),t("div",js,[o(n(ne),{class:"w-4 h-4 mr-2"}),e[27]||(e[27]=d(" AIå°†åˆ†æžæ‚¨çš„é¡¹ç›®æ´»åŠ¨å¹¶ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š ",-1))])])])):p("",!0),_.value&&!h.value?(r(),l("div",Ms,[t("div",$s,[e[30]||(e[30]=t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-blue-600 border-t-transparent"},null,-1)),t("p",Ss,[o(n(ne),{class:"w-4 h-4 mr-2"}),e[29]||(e[29]=d(" æ­£åœ¨ç”ŸæˆAIæŠ¥å‘Š... ",-1))]),z.value?(r(),l("p",Ts,[o(n(N),{class:"w-3 h-3 mr-1"}),d(" å·²è€—æ—¶: "+u(z.value),1)])):p("",!0)])])):h.value?(r(),l("div",Is,[t("div",As,[t("div",null,[t("h3",zs,[o(n(Q),{class:"w-5 h-5 mr-2"}),e[31]||(e[31]=d(" æŠ¥å‘Šå†…å®¹ ",-1))]),t("div",Os,[S.value?(r(),l("span",Rs,[o(n(K),{class:"w-3 h-3 mr-1"}),d(" "+u(S.value.toLocaleString("zh-CN")),1)])):p("",!0),z.value?(r(),l("span",Fs,[o(n(N),{class:"w-3 h-3 mr-1"}),d(" "+u(z.value),1)])):p("",!0)])]),t("div",Ls,[t("button",{onClick:$e,class:"bg-brutal-cyan border-4 border-blue-600 shadow-brutal-sm px-3 py-2 font-bold text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all text-xs"},[o(n(et),{class:"w-3 h-3 mr-1 inline"}),e[32]||(e[32]=d(" å¤åˆ¶ ",-1))]),t("button",{onClick:Se,class:"bg-brutal-green border-4 border-blue-600 shadow-brutal-sm px-3 py-2 font-bold text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all text-xs"},[o(n(Q),{class:"w-3 h-3 mr-1 inline"}),e[33]||(e[33]=d(" æ–‡æœ¬ ",-1))]),t("button",{onClick:Te,class:"bg-brutal-orange border-4 border-blue-600 shadow-brutal-sm px-3 py-2 font-bold text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all text-xs"},[o(n(tt),{class:"w-3 h-3 mr-1 inline"}),e[34]||(e[34]=d(" ä¸‹è½½ ",-1))])])]),t("div",{ref_key:"reportContainer",ref:me,class:"border-4 border-blue-600 shadow-brutal-sm p-6 overflow-auto max-h-96 scroll-smooth bg-white transform -rotate-1"},[_.value?(r(),l("div",Ns,[e[36]||(e[36]=t("div",{class:"bg-brutal-orange border-4 border-blue-600 shadow-brutal p-4 inline-block"},[t("div",{class:"animate-spin rounded-full h-8 w-8 border-4 border-blue-600 border-t-transparent"})],-1)),t("p",Vs,[o(n(ne),{class:"w-4 h-4 mr-2"}),e[35]||(e[35]=d(" æ­£åœ¨ç”ŸæˆAIæŠ¥å‘Š... ",-1))]),z.value?(r(),l("p",Bs,[o(n(N),{class:"w-3 h-3 mr-1"}),d(" "+u(z.value),1)])):p("",!0)])):(r(),l("div",Es,u(h.value),1))],512)])):p("",!0)])])])):p("",!0),(r(),Ee(qe,{to:"body"},[t("div",Ps,[o(He,{name:"toast",tag:"div"},{default:Ue(()=>[(r(!0),l(H,null,q(X.value,(a,i)=>(r(),l("div",{key:a.id,class:"bg-brutal-green border-4 border-blue-600 shadow-brutal overflow-hidden animate-fade-in toast-container min-w-[300px] max-w-[400px] transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all",style:Xe({"z-index":99999-i,"margin-top":i>0?"0.5rem":"0",transform:`rotate(${i%2===0?"1deg":"-1deg"})`})},[(r(),l("div",{class:"countdown-bar bg-blue-600",key:"bar-"+a.id})),t("div",Us,[t("div",Hs,[o(n(Qe),{class:"w-5 h-5 text-blue-600"})]),t("div",qs,[t("p",Gs,u(a.message),1)]),t("div",Ys,[t("button",{onClick:c=>pe(a.id),class:"bg-brutal-red border-2 border-blue-600 shadow-brutal-sm px-2 py-1 font-bold text-gray-800 hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all"},[o(n(ce),{class:"w-3 h-3"})],8,Ws)])])],4))),128))]),_:1})])]))]))}},Ks=nt(Zs,[["__scopeId","data-v-e0911806"]]);export{Ks as default};
