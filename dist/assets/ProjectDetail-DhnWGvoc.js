import{k as ze,u as Re,r as m,l as A,o as Oe,q as Fe,s as Le,c as o,a as r,b as t,f as h,x as Ne,t as b,m as l,h as u,p as n,F as P,d as H,g as de,v as ue,w as Ve,y as Be,T as Ee,z as Pe,i as He,A as Ue,B as qe,j as Ge,n as Ye}from"./index-DkflVWoz.js";import{c as x,_ as We,C as N,A as te}from"./clock-BYkUCitL.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=x("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=x("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=x("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=x("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=x("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=x("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=x("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=x("folder-minus",[["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=x("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=x("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=x("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=x("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=x("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=x("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),rt=(q,f)=>{const G=q.__vccOpts||q;for(const[M,I]of f)G[M]=I;return G},ot={class:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50"},lt={class:"border-b-4 border-black bg-brutal-cyan"},nt={class:"max-w-7xl mx-auto px-6 py-8"},ct={class:"flex justify-between items-center"},it={class:"bg-blue-600 text-white px-3 py-1 inline-block mt-2 font-bold text-sm"},dt={class:"flex items-center"},ut={class:"max-w-7xl mx-auto py-6 px-6"},bt={class:"bg-brutal-yellow border-4 border-blue-600 shadow-brutal p-6 mb-8"},ht={class:"text-2xl font-black text-gray-800 uppercase mb-4 flex items-center"},pt={class:"flex flex-wrap gap-4"},vt=["onClick"],mt={class:"mt-6 flex flex-wrap gap-4"},xt={class:"block text-lg font-black text-gray-800 uppercase mb-2 flex items-center"},yt={class:"block text-lg font-black text-gray-800 uppercase mb-2 flex items-center"},ft={class:"flex items-end"},gt={key:0,class:"bg-brutal-pink border-4 border-blue-600 shadow-brutal p-6 mb-8"},kt={class:"flex justify-between items-start mb-6"},wt={class:"text-2xl font-black text-gray-800 uppercase flex items-center"},_t=["disabled"],Dt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ct={class:"bg-brutal-cyan border-4 border-blue-600 text-center p-4"},jt={class:"text-3xl font-black text-gray-800"},Mt={class:"bg-brutal-green border-4 border-blue-600 text-center p-4"},$t={class:"text-3xl font-black text-gray-800"},Tt={class:"bg-brutal-yellow border-4 border-blue-600 text-center p-4"},St={class:"text-3xl font-black text-gray-800"},It={class:"bg-brutal-orange border-4 border-blue-600 text-center p-4"},At={class:"text-3xl font-black text-gray-800"},zt={class:"bg-white border-4 border-blue-600 shadow-brutal-lg p-6"},Rt={class:"flex justify-between items-center mb-6"},Ot={class:"text-2xl font-black text-gray-800 uppercase flex items-center"},Ft={key:0,class:"flex items-center space-x-4"},Lt={key:0,class:"text-center py-12"},Nt={class:"bg-brutal-yellow border-4 border-blue-600 shadow-brutal p-6 inline-block"},Vt={class:"text-xl font-black text-gray-800 uppercase mb-2 flex items-center justify-center"},Bt={key:1,class:"text-center py-12"},Et={key:2,class:"space-y-6"},Pt=["onClick"],Ht={class:"flex items-center"},Ut={class:"w-6 h-6 bg-blue-600 text-white flex items-center justify-center font-black mr-3"},qt={class:"bg-brutal-pink border-2 border-blue-600 px-4 py-2 font-black text-gray-800 text-sm uppercase"},Gt={class:"ml-4 bg-blue-600 text-white px-2 py-1 font-bold text-xs uppercase"},Yt={key:0,class:"pl-4 border-l-4 border-black space-y-4 transition-all duration-200"},Wt={class:"absolute -left-8 w-8 h-8 bg-brutal-green border-2 border-blue-600 flex items-center justify-center font-black text-gray-800 text-xs"},Zt={class:"flex justify-between items-start"},Xt={class:"flex-1"},Jt={class:"flex items-center space-x-2"},Kt={class:"text-sm font-medium text-gray-900"},Qt={class:"text-sm text-gray-500"},es={key:0,class:"mt-1 text-sm text-gray-600"},ts={key:1,class:"mt-2 space-y-1"},ss={class:"font-bold mb-1"},as={class:"whitespace-pre-wrap"},rs={key:0,class:"text-xs text-gray-400"},os={class:"ml-4 text-right flex-shrink-0"},ls={class:"text-xs text-gray-500"},ns={key:0,class:"text-xs text-gray-400 mt-1"},cs={class:"bg-brutal-yellow border-b-4 border-blue-600 p-6 flex items-center justify-between"},is={class:"text-2xl font-black text-gray-800 uppercase flex items-center"},ds={class:"flex items-center space-x-3"},us=["disabled"],bs={class:"flex-1 overflow-auto p-6 bg-white"},hs={key:0,class:"flex flex-col items-center space-y-6"},ps={class:"bg-brutal-pink border-4 border-blue-600 shadow-brutal px-6 py-3 transform -rotate-1"},vs={class:"text-sm text-gray-800 font-black uppercase flex items-center justify-center"},ms={class:"bg-brutal-cyan border-4 border-blue-600 shadow-brutal px-6 py-3 transform rotate-1"},xs={class:"text-sm text-gray-800 font-black uppercase flex items-center justify-center"},ys={class:"bg-brutal-yellow border-4 border-blue-600 shadow-brutal p-8 inline-block transform rotate-1 hover:-rotate-1 transition-transform duration-300"},fs={class:"text-2xl font-black text-gray-800 uppercase mb-4 flex items-center justify-center"},gs={class:"text-xs text-gray-600 font-bold flex items-center justify-center"},ks={key:1,class:"text-center py-12"},ws={class:"bg-brutal-cyan border-4 border-blue-600 shadow-brutal p-8 inline-block transform -rotate-1"},_s={class:"mt-4 text-gray-800 font-black uppercase flex items-center justify-center"},Ds={key:0,class:"mt-2 text-sm text-gray-600 font-bold flex items-center justify-center"},Cs={key:2,class:"space-y-6"},js={class:"bg-brutal-pink border-4 border-blue-600 shadow-brutal p-4 flex items-center justify-between transform rotate-1"},Ms={class:"text-xl font-black text-gray-800 uppercase flex items-center"},$s={class:"flex items-center space-x-4 mt-2 text-sm font-bold text-gray-600"},Ts={key:0,class:"bg-blue-600 text-white px-2 py-1 rounded flex items-center"},Ss={key:1,class:"bg-blue-600 text-white px-2 py-1 rounded flex items-center"},Is={class:"flex space-x-2"},As={key:0,class:"flex flex-col items-center justify-center py-12"},zs={class:"text-gray-800 font-bold text-sm mt-4 flex items-center justify-center"},Rs={key:0,class:"text-gray-600 font-bold text-xs mt-2 flex items-center justify-center"},Os={key:1,class:"whitespace-pre-wrap font-mono text-sm text-gray-800 leading-relaxed"},Fs={class:"fixed top-4 right-4 z-[99999] space-y-2"},Ls={class:"flex items-center px-4 py-3"},Ns={class:"flex-shrink-0"},Vs={class:"ml-3 flex-1"},Bs={class:"text-sm font-black text-gray-800 uppercase"},Es={class:"ml-2"},Ps=["onClick"],Hs={__name:"ProjectDetail",props:{id:{type:[String,Number],required:!0},name:{type:String,required:!1}},setup(q){const f=q;qe();const G=He(),M=ze();Re();const I=m("week"),g=m(""),k=m(""),X=m(""),p=m(""),_=m(!1),V=m(null),$=m(null),D=m(null),J=m(!1),T=m(new Set),he=m(null),Y=m([]);let pe=0;const ve=[{value:"today",label:"ä»Šå¤©",icon:N},{value:"week",label:"æœ¬å‘¨",icon:Z},{value:"month",label:"æœ¬æœˆ",icon:be},{value:"year",label:"ä»Šå¹´",icon:be}],K=A(()=>M.currentProject),C=A(()=>M.activities),me=A(()=>M.loading),re=A(()=>f.name?decodeURIComponent(f.name):K.value?.overview?.name||"åŠ è½½ä¸­..."),W=m(new Date),z=A(()=>{if(!V.value)return null;if(_.value){const a=((W.value-V.value)/1e3).toFixed(1);return`${parseFloat(a)}ç§’`}else if($.value){const e=(($.value-V.value)/1e3).toFixed(1);return`${parseFloat(e)}ç§’`}return null}),R=A(()=>{const s={};return C.value.forEach(e=>{const a=new Date(e.created_at).toDateString();s[a]||(s[a]=[]),s[a].push(e)}),Object.keys(s).forEach(e=>{s[e].sort((a,d)=>new Date(d.created_at)-new Date(a.created_at))}),s}),O=A(()=>{if(!C.value.length)return null;const s=C.value.filter(c=>c.action?.includes("push")).length,e=C.value.reduce((c,i)=>c+(i.commits?.length||0),0),a=Object.keys(R.value).length,d=C.value.reduce((c,i)=>c+(i.commits?.reduce((j,v)=>j+(v.added||0)+(v.modified||0)+(v.removed||0),0)||0),0);return{pushCount:s,commitCount:e,fileChanges:d,activeDays:a}}),xe=s=>{const e=new Date(s),a=new Date,d=new Date(a);return d.setDate(d.getDate()-1),e.toDateString()===a.toDateString()?"ä»Šå¤©":e.toDateString()===d.toDateString()?"æ˜¨å¤©":e.toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"})},oe=s=>new Date(s).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),Q=s=>{const e=new Date,a=d=>{const c=d.getFullYear(),i=String(d.getMonth()+1).padStart(2,"0"),j=String(d.getDate()).padStart(2,"0");return`${c}-${i}-${j}`};switch(s){case"today":g.value=a(e),k.value=a(e);break;case"week":const d=new Date(e),c=e.getDay(),i=c===0?6:c-1;d.setDate(e.getDate()-i),g.value=a(d),k.value=a(e);break;case"month":const j=new Date(e.getFullYear(),e.getMonth(),1);g.value=a(j),k.value=a(e);break;case"year":const v=new Date(e.getFullYear(),0,1);g.value=a(v),k.value=a(e);break}},ye=s=>{I.value=s,Q(s),F()},F=async()=>{const s=f.id;if(!g.value||!k.value){console.warn("å¼€å§‹æ—¥æœŸæˆ–ç»“æŸæ—¥æœŸä¸ºç©ºï¼Œè·³è¿‡åŠ è½½");return}try{const e=await M.fetchActivities(s,{start_date:g.value,end_date:k.value});X.value="",p.value=""}catch(e){console.error("Failed to load activities:",e)}},fe=()=>{if(!C.value.length)return;const{pushCount:s,commitCount:e,fileChanges:a,activeDays:d}=O.value;let i=`${ne()}æ´»åŠ¨å°ç»“ï¼š

`;i+=`ç»Ÿè®¡æ¦‚è§ˆï¼š
`,i+=`â€¢ æŽ¨é€æ¬¡æ•°ï¼š${s} æ¬¡
`,i+=`â€¢ æäº¤æ•°é‡ï¼š${e} ä¸ª
`,i+=`â€¢ æ–‡ä»¶å˜æ›´ï¼š${a} å¤„
`,i+=`â€¢ æ´»è·ƒå¤©æ•°ï¼š${d} å¤©

`;const j={};Object.entries(R.value).forEach(([v,y])=>{const B=y.filter(E=>E.action?.includes("Push")).length,w=y.reduce((E,ee)=>E+(ee.commits?.length||0),0);j[v]={pushes:B,commits:w,activities:y}}),i+=`æ¯æ—¥ç»Ÿè®¡ï¼š
`,Object.entries(j).sort(([v],[y])=>new Date(y)-new Date(v)).forEach(([v,y])=>{const B=new Date(v).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"});i+=`â€¢ ${B}ï¼šæŽ¨é€ ${y.pushes} æ¬¡ï¼Œæäº¤ ${y.commits} ä¸ª
`}),i+=`
`,i+=`è¯¦ç»†æäº¤è®°å½•ï¼š
`,Object.entries(j).sort(([v],[y])=>new Date(y)-new Date(v)).forEach(([v,y])=>{const B=new Date(v).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"});i+=`
=== ${B} ===
`,y.activities.forEach((w,E)=>{const ee=oe(w.created_at);i+=`
${E+1}. [${ee}] ${w.action||"Push"} to ${w.target_title||w.ref_name||"master"}
`,w.note&&(i+=`   å¤‡æ³¨: ${w.note}
`),w.commits&&w.commits.length>0&&(i+=`   æäº¤å†…å®¹:
`,w.commits.forEach((S,Ae)=>{i+=`   ${Ae+1}) ${S.id?.substring(0,7)} - ${S.message||"æ— æäº¤ä¿¡æ¯"}
`,S.author&&typeof S.author=="string"?i+=`      ä½œè€…: ${S.author}
`:S.author&&S.author.name&&(i+=`      ä½œè€…: ${S.author.name}
`)}))})}),X.value=i},ge=()=>{J.value=!0,W.value=new Date},le=()=>{J.value=!1},ke=s=>s?s.replace(/#{1,6}\s+/g,"").replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/`(.*?)`/g,"$1").replace(/\[([^\]]*)\]\([^)]*\)/g,"$1").replace(/^\s*[-*+]\s+/gm,"â€¢ ").replace(/\n\s*\n/g,`

`).trim():"",ne=()=>{if(g.value&&k.value)switch(I.value){case"today":return"ä»Šæ—¥";case"week":return"æœ¬å‘¨";case"month":return"æœ¬æœˆ";case"year":return"ä»Šå¹´";default:return`${g.value} è‡³ ${k.value}`}return"æ—¶é—´èŒƒå›´æœªè®¾ç½®"},we=()=>{_.value||(p.value="",V.value=null,$.value=null,W.value=new Date,D.value&&(clearInterval(D.value),D.value=null),_e())},_e=async()=>{if(C.value.length&&!_.value)try{_.value=!0,p.value="",V.value=new Date,$.value=null,D.value=setInterval(()=>{W.value=new Date},100),fe();const s={project_id:parseInt(f.id),report_type:"activity_summary",time_range:"custom",start_date:g.value,end_date:k.value,additional_context:`é¡¹ç›®ï¼š${re.value}
æ—¶é—´èŒƒå›´ï¼š${ne()}
æ´»åŠ¨æ€»ç»“ï¼š${X.value}`,response_mode:"blocking",user:"frontend_user"},e=await Ue.generateAIReportBlocking(f.id,s);e&&e.data&&e.data.answer&&(p.value=e.data.answer,$.value=new Date,D.value&&(clearInterval(D.value),D.value=null))}catch(s){console.error("AIæŠ¥å‘Šç”Ÿæˆå¤±è´¥:",s),p.value=`## æŠ¥å‘Šç”Ÿæˆå¤±è´¥

å¾ˆæŠ±æ­‰ï¼ŒAIæŠ¥å‘Šç”Ÿæˆè¿‡ç¨‹ä¸­å‡ºçŽ°äº†é”™è¯¯ï¼š${s.message}

è¯·ç¨åŽé‡è¯•ï¼Œæˆ–è”ç³»ç³»ç»Ÿç®¡ç†å‘˜ã€‚

---
*é”™è¯¯æ—¶é—´ï¼š${new Date().toLocaleString("zh-CN")}*`,$.value=new Date}finally{_.value=!1,D.value&&(clearInterval(D.value),D.value=null)}},De=(s,e="success")=>{const a={id:++pe,message:s,type:e,timestamp:Date.now()};Y.value.push(a),console.log("Toastæ·»åŠ :",s),setTimeout(()=>{ce(a.id)},4e3)},ce=s=>{const e=Y.value.findIndex(a=>a.id===s);e>-1&&(Y.value.splice(e,1),console.log("Toastç§»é™¤:",s))},L=s=>{De(s,"success")},Ce=async()=>{try{if(!p.value){L("æš‚æ— æŠ¥å‘Šå†…å®¹å¯å¤åˆ¶");return}await navigator.clipboard.writeText(p.value),L("æŠ¥å‘Šå·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(s){console.error("å¤åˆ¶å¤±è´¥:",s),L("å¤åˆ¶å¤±è´¥ï¼Œè¯·é‡è¯•")}},je=async()=>{try{if(!p.value){L("æš‚æ— æŠ¥å‘Šå†…å®¹å¯å¤åˆ¶");return}const s=ke(p.value);await navigator.clipboard.writeText(s),L("æ–‡æœ¬å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(s){console.error("å¤åˆ¶å¤±è´¥:",s),L("å¤åˆ¶å¤±è´¥ï¼Œè¯·é‡è¯•")}},Me=()=>{const s=new Blob([p.value],{type:"text/markdown;charset=utf-8"}),e=URL.createObjectURL(s),a=document.createElement("a");a.href=e,a.download=`é¡¹ç›®æ´»åŠ¨æŠ¥å‘Š_${f.id}_${new Date().toISOString().split("T")[0]}.md`,a.click(),URL.revokeObjectURL(e)},$e=s=>{T.value.has(s)?T.value.delete(s):T.value.add(s)},ie=s=>T.value.has(s),Te=()=>{T.value=new Set(Object.keys(R.value))},Se=()=>{T.value.clear()},Ie=()=>{G.push("/")};return Oe(()=>{f.id&&(Q(I.value),K.value?.overview||M.fetchProjectOverview(f.id),F())}),Fe(()=>{}),Le(()=>f.id,s=>{s&&(Q(I.value),M.fetchProjectOverview(s),F())}),(s,e)=>(r(),o("div",ot,[t("header",lt,[t("div",nt,[t("div",ct,[t("div",null,[t("h1",{class:"text-4xl font-black text-gray-800 uppercase cursor-pointer hover:bg-brutal-yellow hover:px-2 transition-all",onClick:Ie},b(re.value),1),t("div",it,b(K.value?.overview?.description||"é¡¹ç›®æ´»åŠ¨æ—¶é—´çº¿"),1)]),t("div",dt,[l(We)])])])]),t("main",ut,[t("div",bt,[t("h2",ht,[l(n(N),{class:"w-6 h-6 mr-3 text-blue-600"}),e[3]||(e[3]=u(" æ—¶é—´ç­›é€‰å™¨ ",-1))]),t("div",pt,[(r(),o(P,null,H(ve,a=>t("button",{key:a.value,onClick:d=>ye(a.value),class:Ge(["border-4 border-blue-600 px-4 py-2 font-black text-gray-800 uppercase transition-all hover:transform hover:scale-105",I.value===a.value?"bg-blue-600 text-brutal-yellow shadow-brutal-sm":"bg-white hover:bg-brutal-pink"])},b(a.label),11,vt)),64))]),t("div",mt,[t("div",null,[t("label",xt,[l(n(Z),{class:"w-5 h-5 mr-2 text-blue-600"}),e[4]||(e[4]=u(" å¼€å§‹æ—¥æœŸ ",-1))]),de(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=a=>g.value=a),onChange:F,class:"border-4 border-blue-600 px-3 py-2 font-bold focus:outline-none focus:bg-brutal-cyan"},null,544),[[ue,g.value]])]),t("div",null,[t("label",yt,[l(n(Z),{class:"w-5 h-5 mr-2 text-blue-600"}),e[5]||(e[5]=u(" ç»“æŸæ—¥æœŸ ",-1))]),de(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>k.value=a),onChange:F,class:"border-4 border-blue-600 px-3 py-2 font-bold focus:outline-none focus:bg-brutal-cyan"},null,544),[[ue,k.value]])]),t("div",ft,[t("button",{onClick:F,class:"bg-brutal-green border-4 border-blue-600 shadow-brutal px-6 py-2 font-black text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all"},[l(n(st),{class:"w-5 h-5 mr-2"}),e[6]||(e[6]=u(" æŸ¥è¯¢ ",-1))])])])]),O.value?(r(),o("div",gt,[t("div",kt,[t("h2",wt,[l(n(Ze),{class:"w-6 h-6 mr-3 text-blue-600"}),e[7]||(e[7]=u(" æ´»åŠ¨æ¦‚è§ˆ ",-1))]),t("button",{onClick:ge,disabled:!C.value.length,class:"bg-brutal-orange border-4 border-blue-600 shadow-brutal px-4 py-2 font-black text-gray-800 uppercase hover:transform hover:scale-105 transition-all disabled:opacity-50"},[l(n(U),{class:"w-5 h-5 mr-2"}),e[8]||(e[8]=u(" ç”ŸæˆAIæŠ¥å‘Š ",-1))],8,_t)]),t("div",Dt,[t("div",Ct,[t("div",jt,b(O.value.pushCount),1),e[9]||(e[9]=t("div",{class:"text-sm font-bold text-gray-800 uppercase"},"æŽ¨é€æ¬¡æ•°",-1))]),t("div",Mt,[t("div",$t,b(O.value.commitCount),1),e[10]||(e[10]=t("div",{class:"text-sm font-bold text-gray-800 uppercase"},"æäº¤æ•°é‡",-1))]),t("div",Tt,[t("div",St,b(O.value.fileChanges),1),e[11]||(e[11]=t("div",{class:"text-sm font-bold text-gray-800 uppercase"},"æ–‡ä»¶å˜æ›´",-1))]),t("div",It,[t("div",At,b(O.value.activeDays),1),e[12]||(e[12]=t("div",{class:"text-sm font-bold text-gray-800 uppercase"},"æ´»è·ƒå¤©æ•°",-1))])])])):h("",!0),t("div",zt,[t("div",Rt,[t("h2",Ot,[l(n(at),{class:"w-6 h-6 mr-3 text-blue-600"}),e[13]||(e[13]=u(" æ´»åŠ¨æ—¶é—´çº¿ ",-1))]),Object.keys(R.value).length>0?(r(),o("div",Ft,[T.value.size<Object.keys(R.value).length?(r(),o("button",{key:0,onClick:Te,class:"bg-brutal-cyan border-4 border-blue-600 px-3 py-1 font-black text-gray-800 text-sm uppercase hover:bg-brutal-pink transition-colors"},[l(n(Qe),{class:"w-4 h-4 mr-2"}),e[14]||(e[14]=u(" å…¨éƒ¨æ”¶ç¼© ",-1))])):h("",!0),T.value.size>0?(r(),o("button",{key:1,onClick:Se,class:"bg-brutal-green border-4 border-blue-600 px-3 py-1 font-black text-gray-800 text-sm uppercase hover:bg-brutal-yellow transition-colors"},[l(n(et),{class:"w-4 h-4 mr-2"}),e[15]||(e[15]=u(" å…¨éƒ¨å±•å¼€ ",-1))])):h("",!0)])):h("",!0)]),me.value?(r(),o("div",Lt,[t("div",Nt,[t("div",Vt,[l(n(tt),{class:"w-6 h-6 mr-3 animate-spin text-blue-600"}),e[16]||(e[16]=u(" åŠ è½½ä¸­ ",-1))]),e[17]||(e[17]=t("div",{class:"text-sm font-bold text-gray-800"},"æ­£åœ¨èŽ·å–æ´»åŠ¨è®°å½•...",-1))])])):C.value.length===0?(r(),o("div",Bt,[...e[18]||(e[18]=[t("div",{class:"bg-brutal-orange border-4 border-blue-600 shadow-brutal-lg p-8 max-w-md mx-auto transform -rotate-1"},[t("h3",{class:"text-xl font-black text-gray-800 uppercase mb-4"},"ðŸ“­ æ²¡æœ‰æ´»åŠ¨è®°å½•"),t("p",{class:"text-sm font-bold text-gray-800"}," åœ¨æ‰€é€‰æ—¶é—´èŒƒå›´å†…æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æŽ¨é€æ´»åŠ¨ ")],-1)])])):(r(),o("div",Et,[(r(!0),o(P,null,H(R.value,(a,d)=>(r(),o("div",{key:d,class:"relative"},[t("div",{class:"flex items-center mb-4 cursor-pointer hover:bg-brutal-yellow hover:px-2 p-2 -mx-2 transition-all border-2 border-blue-600",onClick:c=>$e(d)},[t("div",Ht,[t("span",Ut,b(ie(d)?"â–º":"â–¼"),1),t("div",qt,b(xe(d)),1)]),e[19]||(e[19]=t("div",{class:"flex-1 h-1 bg-blue-600 ml-4"},null,-1)),t("div",Gt,b(a.length)+" ä¸ªæ´»åŠ¨ ",1)],8,Pt),ie(d)?h("",!0):(r(),o("div",Yt,[(r(!0),o(P,null,H(a,c=>(r(),o("div",{key:c.id||c.created_at,class:"relative border-4 border-blue-600 shadow-brutal bg-white p-4 hover:shadow-brutal-lg hover:transform hover:-translate-y-1 transition-all"},[t("div",Wt,[l(n(se),{class:"w-4 h-4"})]),t("div",Zt,[t("div",Xt,[t("div",Jt,[t("h3",Kt,b(c.action||"pushed to"),1),t("span",Qt,b(c.target_title||c.ref_name||"master"),1)]),c.note?(r(),o("p",es,b(c.note),1)):h("",!0),c.commits&&c.commits.length?(r(),o("div",ts,[(r(!0),o(P,null,H(c.commits.slice(0,3),i=>(r(),o("div",{key:i.id,class:"text-xs text-gray-500 font-mono bg-gray-50 p-2 rounded"},[t("div",ss,b(i.id?.substring(0,7)),1),t("div",as,b(i.message),1)]))),128)),c.commits.length>3?(r(),o("div",rs," è¿˜æœ‰ "+b(c.commits.length-3)+" ä¸ªæäº¤... ",1)):h("",!0)])):h("",!0)]),t("div",os,[t("div",ls,b(oe(c.created_at)),1),c.author_name?(r(),o("div",ns,b(c.author_name),1)):h("",!0)])])]))),128))]))]))),128))]))])]),J.value?(r(),o("div",{key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:le},[t("div",{class:"bg-white border-4 border-blue-600 shadow-brutal-lg max-w-4xl w-full max-h-[90vh] flex flex-col transform rotate-1 hover:rotate-0 transition-transform duration-300",onClick:e[2]||(e[2]=Ve(()=>{},["stop"]))},[t("div",cs,[t("h2",is,[l(n(U),{class:"w-6 h-6 mr-3 text-blue-600"}),e[20]||(e[20]=u(" AIæ™ºèƒ½æŠ¥å‘Š ",-1))]),t("div",ds,[t("button",{onClick:we,disabled:_.value,class:"bg-brutal-green border-4 border-blue-600 shadow-brutal px-4 py-2 font-black text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all disabled:opacity-50 disabled:cursor-not-allowed","data-ai-generate-btn":""},[l(n(U),{class:"w-4 h-4 mr-2 inline"}),u(" "+b(_.value?"ç”Ÿæˆä¸­...":p.value?"é‡æ–°ç”Ÿæˆ":"ç”ŸæˆæŠ¥å‘Š"),1)],8,us),t("button",{onClick:le,class:"bg-brutal-red border-4 border-blue-600 shadow-brutal px-3 py-2 font-black text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all"},[l(n(ae),{class:"w-4 h-4"})])])]),t("div",bs,[!_.value&&!p.value?(r(),o("div",hs,[t("div",ps,[t("div",vs,[l(n(N),{class:"w-4 h-4 mr-2 text-blue-600"}),e[21]||(e[21]=u(" é¢„è®¡è€—æ—¶ 30-60 ç§’ ",-1))])]),t("div",ms,[t("div",xs,[l(n(ae),{class:"w-4 h-4 mr-2 text-blue-600"}),e[22]||(e[22]=u(" å¼€å§‹ç”ŸæˆåŽå¯å…³é—­çª—å£ï¼Œç”Ÿæˆä¸ä¼šä¸­æ–­ ",-1))])]),t("div",ys,[l(n(U),{class:"w-16 h-16 text-blue-600 mb-4 mx-auto"}),t("h3",fs,[l(n(U),{class:"w-8 h-8 mr-3"}),e[23]||(e[23]=u(" AIæ™ºèƒ½æŠ¥å‘Š ",-1))]),e[25]||(e[25]=t("p",{class:"text-sm font-bold text-gray-800 mb-4"},"ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ç”Ÿæˆæ™ºèƒ½åˆ†æžæŠ¥å‘Š",-1)),t("div",gs,[l(n(te),{class:"w-4 h-4 mr-2"}),e[24]||(e[24]=u(" AIå°†åˆ†æžæ‚¨çš„é¡¹ç›®æ´»åŠ¨å¹¶ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š ",-1))])])])):h("",!0),_.value&&!p.value?(r(),o("div",ks,[t("div",ws,[e[27]||(e[27]=t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-blue-600 border-t-transparent"},null,-1)),t("p",_s,[l(n(te),{class:"w-4 h-4 mr-2"}),e[26]||(e[26]=u(" æ­£åœ¨ç”ŸæˆAIæŠ¥å‘Š... ",-1))]),z.value?(r(),o("p",Ds,[l(n(N),{class:"w-3 h-3 mr-1"}),u(" å·²è€—æ—¶: "+b(z.value),1)])):h("",!0)])])):p.value?(r(),o("div",Cs,[t("div",js,[t("div",null,[t("h3",Ms,[l(n(se),{class:"w-5 h-5 mr-2"}),e[28]||(e[28]=u(" æŠ¥å‘Šå†…å®¹ ",-1))]),t("div",$s,[$.value?(r(),o("span",Ts,[l(n(Z),{class:"w-3 h-3 mr-1"}),u(" "+b($.value.toLocaleString("zh-CN")),1)])):h("",!0),z.value?(r(),o("span",Ss,[l(n(N),{class:"w-3 h-3 mr-1"}),u(" "+b(z.value),1)])):h("",!0)])]),t("div",Is,[t("button",{onClick:Ce,class:"bg-brutal-cyan border-4 border-blue-600 shadow-brutal-sm px-3 py-2 font-bold text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all text-xs"},[l(n(Je),{class:"w-3 h-3 mr-1 inline"}),e[29]||(e[29]=u(" å¤åˆ¶ ",-1))]),t("button",{onClick:je,class:"bg-brutal-green border-4 border-blue-600 shadow-brutal-sm px-3 py-2 font-bold text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all text-xs"},[l(n(se),{class:"w-3 h-3 mr-1 inline"}),e[30]||(e[30]=u(" æ–‡æœ¬ ",-1))]),t("button",{onClick:Me,class:"bg-brutal-orange border-4 border-blue-600 shadow-brutal-sm px-3 py-2 font-bold text-gray-800 uppercase hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all text-xs"},[l(n(Ke),{class:"w-3 h-3 mr-1 inline"}),e[31]||(e[31]=u(" ä¸‹è½½ ",-1))])])]),t("div",{ref_key:"reportContainer",ref:he,class:"border-4 border-blue-600 shadow-brutal-sm p-6 overflow-auto max-h-96 scroll-smooth bg-white transform -rotate-1"},[_.value?(r(),o("div",As,[e[33]||(e[33]=t("div",{class:"bg-brutal-orange border-4 border-blue-600 shadow-brutal p-4 inline-block"},[t("div",{class:"animate-spin rounded-full h-8 w-8 border-4 border-blue-600 border-t-transparent"})],-1)),t("p",zs,[l(n(te),{class:"w-4 h-4 mr-2"}),e[32]||(e[32]=u(" æ­£åœ¨ç”ŸæˆAIæŠ¥å‘Š... ",-1))]),z.value?(r(),o("p",Rs,[l(n(N),{class:"w-3 h-3 mr-1"}),u(" "+b(z.value),1)])):h("",!0)])):(r(),o("div",Os,b(p.value),1))],512)])):h("",!0)])])])):h("",!0),(r(),Ne(Pe,{to:"body"},[t("div",Fs,[l(Ee,{name:"toast",tag:"div"},{default:Be(()=>[(r(!0),o(P,null,H(Y.value,(a,d)=>(r(),o("div",{key:a.id,class:"bg-brutal-green border-4 border-blue-600 shadow-brutal overflow-hidden animate-fade-in toast-container min-w-[300px] max-w-[400px] transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all",style:Ye({"z-index":99999-d,"margin-top":d>0?"0.5rem":"0",transform:`rotate(${d%2===0?"1deg":"-1deg"})`})},[(r(),o("div",{class:"countdown-bar bg-blue-600",key:"bar-"+a.id})),t("div",Ls,[t("div",Ns,[l(n(Xe),{class:"w-5 h-5 text-blue-600"})]),t("div",Vs,[t("p",Bs,b(a.message),1)]),t("div",Es,[t("button",{onClick:c=>ce(a.id),class:"bg-brutal-red border-2 border-blue-600 shadow-brutal-sm px-2 py-1 font-bold text-gray-800 hover:transform hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all"},[l(n(ae),{class:"w-3 h-3"})],8,Ps)])])],4))),128))]),_:1})])]))]))}},Gs=rt(Hs,[["__scopeId","data-v-f2f3162b"]]);export{Gs as default};
